<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Unit Testing | ML Workflow for Research Scientists</title>
  <meta name="description" content="This is a tutorial for Google Colab users to contribute code to a well-structured Python project." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Unit Testing | ML Workflow for Research Scientists" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a tutorial for Google Colab users to contribute code to a well-structured Python project." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Unit Testing | ML Workflow for Research Scientists" />
  
  <meta name="twitter:description" content="This is a tutorial for Google Colab users to contribute code to a well-structured Python project." />
  

<meta name="author" content="Ajinkya K Mulay" />


<meta name="date" content="2021-02-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="git.html"/>
<link rel="next" href="doc.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Google Colab Workflow for <br/> Research Scientists</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preamble</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#who-is-this-wiki-for"><i class="fa fa-check"></i>Who is this wiki for?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-wont-you-learn"><i class="fa fa-check"></i>What won’t you learn?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-will-you-learn"><i class="fa fa-check"></i>What will you learn?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="setup.html"><a href="setup.html"><i class="fa fa-check"></i><b>2</b> ML Setup</a><ul>
<li class="chapter" data-level="2.1" data-path="setup.html"><a href="setup.html#google-colaboratory-colab"><i class="fa fa-check"></i><b>2.1</b> Google Colaboratory (Colab)</a></li>
<li class="chapter" data-level="2.2" data-path="setup.html"><a href="setup.html#visual-studio-vs-code-local-option"><i class="fa fa-check"></i><b>2.2</b> Visual Studio (VS) Code (Local Option)</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="git.html"><a href="git.html"><i class="fa fa-check"></i><b>3</b> Git, Github and Desktop management</a><ul>
<li class="chapter" data-level="3.1" data-path="git.html"><a href="git.html#using-git"><i class="fa fa-check"></i><b>3.1</b> Using Git</a><ul>
<li class="chapter" data-level="3.1.1" data-path="git.html"><a href="git.html#setting-up-a-local-repository-from-a-remote-one"><i class="fa fa-check"></i><b>3.1.1</b> Setting up a local repository from a remote one</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="git.html"><a href="git.html#using-github-and-google-colaboratory-colab"><i class="fa fa-check"></i><b>3.2</b> Using GitHub and Google Colaboratory (Colab)</a></li>
<li class="chapter" data-level="3.3" data-path="git.html"><a href="git.html#in-built-option"><i class="fa fa-check"></i><b>3.3</b> In-built option</a></li>
<li class="chapter" data-level="3.4" data-path="git.html"><a href="git.html#the-longer-option"><i class="fa fa-check"></i><b>3.4</b> The Longer Option</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="testing.html"><a href="testing.html"><i class="fa fa-check"></i><b>4</b> Unit Testing</a></li>
<li class="chapter" data-level="5" data-path="doc.html"><a href="doc.html"><i class="fa fa-check"></i><b>5</b> Documentation</a></li>
<li class="chapter" data-level="6" data-path="benchmarking.html"><a href="benchmarking.html"><i class="fa fa-check"></i><b>6</b> Benchmarking</a></li>
<li class="chapter" data-level="7" data-path="putting-it-all-together.html"><a href="putting-it-all-together.html"><i class="fa fa-check"></i><b>7</b> Putting It All Together</a><ul>
<li class="chapter" data-level="7.1" data-path="putting-it-all-together.html"><a href="putting-it-all-together.html#workflow"><i class="fa fa-check"></i><b>7.1</b> Workflow</a></li>
<li class="chapter" data-level="7.2" data-path="putting-it-all-together.html"><a href="putting-it-all-together.html#concluding-remarks"><i class="fa fa-check"></i><b>7.2</b> Concluding Remarks</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">ML Workflow for Research Scientists</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="testing" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Unit Testing</h1>
<p>The simplest way to create unit tests in python are using the module <em>unittest</em>. Let us look at a simple example (from <a href="https://www.geeksforgeeks.org/unit-testing-python-unittest/">GeeksforGeeks</a>)</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="testing.html#cb9-1"></a><span class="co"># Python code to demonstrate working of unittest </span></span>
<span id="cb9-2"><a href="testing.html#cb9-2"></a><span class="im">import</span> unittest </span>
<span id="cb9-3"><a href="testing.html#cb9-3"></a>  </span>
<span id="cb9-4"><a href="testing.html#cb9-4"></a><span class="kw">class</span> TestStringMethods(unittest.TestCase): </span>
<span id="cb9-5"><a href="testing.html#cb9-5"></a></span>
<span id="cb9-6"><a href="testing.html#cb9-6"></a>    <span class="co"># Returns True if the string contains 4 a. </span></span>
<span id="cb9-7"><a href="testing.html#cb9-7"></a>    <span class="kw">def</span> test_strings_a(<span class="va">self</span>): </span>
<span id="cb9-8"><a href="testing.html#cb9-8"></a>        <span class="va">self</span>.assertEqual( <span class="st">&#39;a&#39;</span><span class="op">*</span><span class="dv">4</span>, <span class="st">&#39;aaaa&#39;</span>) </span>
<span id="cb9-9"><a href="testing.html#cb9-9"></a>  </span>
<span id="cb9-10"><a href="testing.html#cb9-10"></a>    <span class="co"># Returns True if the string is in upper case. </span></span>
<span id="cb9-11"><a href="testing.html#cb9-11"></a>    <span class="kw">def</span> test_upper(<span class="va">self</span>):         </span>
<span id="cb9-12"><a href="testing.html#cb9-12"></a>        <span class="va">self</span>.assertEqual(<span class="st">&#39;foo&#39;</span>.upper(), <span class="st">&#39;FOO&#39;</span>) </span>
<span id="cb9-13"><a href="testing.html#cb9-13"></a>        </span>
<span id="cb9-14"><a href="testing.html#cb9-14"></a><span class="co"># Run all unit tests</span></span>
<span id="cb9-15"><a href="testing.html#cb9-15"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&#39;__main__&#39;</span>: </span>
<span id="cb9-16"><a href="testing.html#cb9-16"></a>    unittest.main() </span></code></pre></div>
<p>The above example is pretty self-explanatory. It tests two simple functions- multiplying a string by 4 times and converting a string to uppercase. These tests are super useful for deterministic functions. However, creating such tests for gradient descent might not be easy. However, if we know the possible bounds on the function’s output we can create functions to test them. A simple ML testing library is indeed available for <a href="https://medium.com/@keeper6928/mltest-automatically-test-neural-network-models-in-one-function-call-eb6f1fa5019d">tensorflow (deprecated in TF2.0)</a> and <a href="https://github.com/suriyadeepan/torchtest">pytorch</a>. unittest could well be used to define something similar as demonstrated in <a href="https://codereview.stackexchange.com/questions/227423/pytorch-unit-testing-in-python">pytorch code review</a>.</p>
<p>These libraries check for the following items:
* Whether variables change
* If certain variables are fixed, do they remain fixed over iterations
* Is the output value reasonable (i.e. under certain bounds)?
* Is the model well connected (i.e. do all inputs contriibute to the training operation)?</p>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="git.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="doc.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/03-testing.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
